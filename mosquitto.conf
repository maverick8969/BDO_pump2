# ============================================================================
# MOSQUITTO MQTT BROKER CONFIGURATION
# Chemical Dosing System
# ============================================================================

# Basic settings
listener 1883
protocol mqtt

# Allow anonymous connections (for testing/development)
# IMPORTANT: Disable this in production and use authentication!
allow_anonymous true

# Persistence
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information

# Connection limits
max_connections -1

# Message size limit (default 256MB is fine for our JSON payloads)
message_size_limit 1024

# ============================================================================
# AUTHENTICATION (Uncomment for production)
# ============================================================================

# To enable authentication:
# 1. Uncomment the lines below
# 2. Create password file: mosquitto_passwd -c /mosquitto/config/passwd username
# 3. Add more users: mosquitto_passwd /mosquitto/config/passwd another_user

# password_file /mosquitto/config/passwd
# allow_anonymous false

# ============================================================================
# TLS/SSL (Uncomment for secure connections)
# ============================================================================

# listener 8883
# protocol mqtt
# cafile /mosquitto/certs/ca.crt
# certfile /mosquitto/certs/server.crt
# keyfile /mosquitto/certs/server.key
# require_certificate false

# ============================================================================
# WEBSOCKETS (Optional - for web-based MQTT clients)
# ============================================================================

listener 9001
protocol websockets
